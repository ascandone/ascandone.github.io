<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.f71104d1371483c84236.css">/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}button{background-color:transparent;background-image:none}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}fieldset,ol,ul{margin:0;padding:0}ol,ul{list-style:none}html{font-family:Nunito,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;line-height:1.5}*,:after,:before{box-sizing:border-box;border:0 solid #d2d6dc}hr{border-top-width:1px}img{border-style:solid}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{color:#a0aec0}input:-ms-input-placeholder,textarea:-ms-input-placeholder{color:#a0aec0}input::placeholder,textarea::placeholder{color:#a0aec0}[role=button],button{cursor:pointer}table{border-collapse:collapse}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}button,input,optgroup,select,textarea{padding:0;line-height:inherit;color:inherit}code,kbd,pre,samp{font-family:Roboto mono,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}.container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@-webkit-keyframes gradient-position-animation{0%{background-position-x:0}50%{background-position-x:100%}to{background-position-x:0}}@keyframes gradient-position-animation{0%{background-position-x:0}50%{background-position-x:100%}to{background-position-x:0}}.animate-gradient{-webkit-animation-name:gradient-position-animation;animation-name:gradient-position-animation;background-size:300% 90%;background-position-y:50%;background-repeat:no-repeat;-webkit-animation-timing-function:ease;animation-timing-function:ease;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite}.animate-gradient-a{-webkit-animation-duration:18s;animation-duration:18s}.animate-gradient-b{-webkit-animation-duration:12s;animation-duration:12s}.underline-gradient-dark{--color:#364152}.prose a,.underline-gradient,.underline-gradient-dark{background-position:.1em 88%;background-image:linear-gradient(0deg,var(--color) 100%,var(--color) 0);background-repeat:no-repeat;background-size:100% 25%}.prose a,.underline-gradient{--color:#e2e8f0}.prose a:hover,.underline-gradient:hover{--text-opacity:1;color:#161e2e;color:rgba(22,30,46,var(--text-opacity));background-size:100% 50%}.underline-gradient-thin{background-position:0 100%;background-image:linear-gradient(120deg,#d53f8c 100%,#d53f8c 0);background-repeat:no-repeat;background-size:100% 1px}b{--text-opacity:1;color:#252f3f;color:rgba(37,47,63,var(--text-opacity))}.space-y-3>:not(template)~:not(template){--space-y-reverse:0;margin-top:calc(0.75rem*(1 - var(--space-y-reverse)));margin-bottom:calc(0.75rem*var(--space-y-reverse))}.space-x-4>:not(template)~:not(template){--space-x-reverse:0;margin-right:calc(1rem*var(--space-x-reverse));margin-left:calc(1rem*(1 - var(--space-x-reverse)))}.space-y-10>:not(template)~:not(template){--space-y-reverse:0;margin-top:calc(2.5rem*(1 - var(--space-y-reverse)));margin-bottom:calc(2.5rem*var(--space-y-reverse))}.bg-white{--bg-opacity:1;background-color:#fff;background-color:rgba(255,255,255,var(--bg-opacity))}.bg-gray-400{--bg-opacity:1;background-color:#9fa6b2;background-color:rgba(159,166,178,var(--bg-opacity))}.bg-cool-gray-100{--bg-opacity:1;background-color:#f1f5f9;background-color:rgba(241,245,249,var(--bg-opacity))}.bg-darkest-gray{--bg-opacity:1;background-color:#121212;background-color:rgba(18,18,18,var(--bg-opacity))}.hover\:bg-dark-gray:hover{--bg-opacity:1;background-color:#3a3a3c;background-color:rgba(58,58,60,var(--bg-opacity))}.bg-gradient-45{background-image:linear-gradient(45deg,var(--gradient-color-stops))}.bg-gradient-150{background-image:linear-gradient(150deg,var(--gradient-color-stops))}.from-pink-700{--gradient-from-color:#bf125d;--gradient-color-stops:var(--gradient-from-color),var(--gradient-to-color,rgba(191,18,93,0))}.via-pink-500{--gradient-via-color:#e74694;--gradient-color-stops:var(--gradient-from-color),var(--gradient-via-color),var(--gradient-to-color,rgba(231,70,148,0))}.to-orange-500{--gradient-to-color:#ff5a1f}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-t-lg{border-top-left-radius:.5rem;border-top-right-radius:.5rem}.cursor-pointer{cursor:pointer}.flex{display:flex}.table{display:table}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-end{align-items:flex-end}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.flex-1{flex:1 1 0%}.font-serif{font-family:Eb Garamond,Georgia,Cambria,Times New Roman,Times,serif}.font-mono{font-family:Roboto mono,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace}.font-light{font-weight:300}.font-semibold{font-weight:600}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.h-1{height:.25rem}.h-5{height:1.25rem}.h-12{height:3rem}.h-16{height:4rem}.text-xs{font-size:.75rem}.text-sm{font-size:.875rem}.text-lg{font-size:1.125rem}.text-4xl{font-size:2.25rem}.text-5xl{font-size:3rem}.leading-none{line-height:1}.leading-tight{line-height:1.25}.leading-snug{line-height:1.375}.leading-relaxed{line-height:1.625}.mx-auto{margin-left:auto;margin-right:auto}.-mx-1{margin-left:-.25rem;margin-right:-.25rem}.-mx-px{margin-left:-1px;margin-right:-1px}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mb-2{margin-bottom:.5rem}.mt-3{margin-top:.75rem}.mb-3{margin-bottom:.75rem}.mt-4{margin-top:1rem}.mr-4{margin-right:1rem}.ml-4{margin-left:1rem}.mt-6{margin-top:1.5rem}.mb-6{margin-bottom:1.5rem}.mr-8{margin-right:2rem}.mt-10{margin-top:2.5rem}.mb-10{margin-bottom:2.5rem}.mt-16{margin-top:4rem}.mb-20{margin-bottom:5rem}.-ml-4{margin-left:-1rem}.-mt-6{margin-top:-1.5rem}.max-w-md{max-width:28rem}.max-w-2xl{max-width:42rem}.max-w-full{max-width:100%}.min-h-screen{min-height:100vh}.min-w-0{min-width:0}.p-px{padding:1px}.px-1{padding-left:.25rem;padding-right:.25rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.py-8{padding-top:2rem;padding-bottom:2rem}.py-16{padding-top:4rem;padding-bottom:4rem}.px-px{padding-left:1px;padding-right:1px}.fill-current{fill:currentColor}.text-white{--text-opacity:1;color:#fff;color:rgba(255,255,255,var(--text-opacity))}.text-black{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.text-gray-200{--text-opacity:1;color:#e5e7eb;color:rgba(229,231,235,var(--text-opacity))}.text-gray-300{--text-opacity:1;color:#d2d6dc;color:rgba(210,214,220,var(--text-opacity))}.text-gray-400{--text-opacity:1;color:#9fa6b2;color:rgba(159,166,178,var(--text-opacity))}.text-gray-500{--text-opacity:1;color:#6b7280;color:rgba(107,114,128,var(--text-opacity))}.text-gray-600{--text-opacity:1;color:#4b5563;color:rgba(75,85,99,var(--text-opacity))}.text-gray-700{--text-opacity:1;color:#374151;color:rgba(55,65,81,var(--text-opacity))}.text-gray-800{--text-opacity:1;color:#252f3f;color:rgba(37,47,63,var(--text-opacity))}.text-gray-900{--text-opacity:1;color:#161e2e;color:rgba(22,30,46,var(--text-opacity))}.text-cool-gray-300{--text-opacity:1;color:#cfd8e3;color:rgba(207,216,227,var(--text-opacity))}.text-darkest-gray{--text-opacity:1;color:#121212;color:rgba(18,18,18,var(--text-opacity))}.uppercase{text-transform:uppercase}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.tracking-wide{letter-spacing:.025em}.whitespace-normal{white-space:normal}.whitespace-no-wrap{white-space:nowrap}.w-8{width:2rem}.w-12{width:3rem}.w-32{width:8rem}.w-56{width:14rem}.w-full{width:100%}.transition-all{transition-property:all}.transition-colors{transition-property:background-color,border-color,color,fill,stroke}.duration-200{transition-duration:.2s}.duration-300{transition-duration:.3s}@-webkit-keyframes spin{to{transform:rotate(1turn)}}@keyframes spin{to{transform:rotate(1turn)}}@-webkit-keyframes ping{75%,to{transform:scale(2);opacity:0}}@keyframes ping{75%,to{transform:scale(2);opacity:0}}@-webkit-keyframes pulse{50%{opacity:.5}}@keyframes pulse{50%{opacity:.5}}@-webkit-keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@keyframes bounce{0%,to{transform:translateY(-25%);-webkit-animation-timing-function:cubic-bezier(.8,0,1,1);animation-timing-function:cubic-bezier(.8,0,1,1)}50%{transform:none;-webkit-animation-timing-function:cubic-bezier(0,0,.2,1);animation-timing-function:cubic-bezier(0,0,.2,1)}}@media (min-width:640px){.sm\:container{width:100%;max-width:640px}@media (min-width:768px){.sm\:container{max-width:768px}}@media (min-width:1024px){.sm\:container{max-width:1024px}}@media (min-width:1280px){.sm\:container{max-width:1280px}}.sm\:justify-center{justify-content:center}}@media (min-width:768px){.md\:container{width:100%}@media (min-width:640px){.md\:container{max-width:640px}}@media (min-width:768px){.md\:container{max-width:768px}}@media (min-width:1024px){.md\:container{max-width:1024px}}@media (min-width:1280px){.md\:container{max-width:1280px}}.md\:rounded-none{border-radius:0}.md\:flex{display:flex}.md\:flex-row{flex-direction:row}.md\:flex-1{flex:1 1 0%}.md\:h-screen{height:100vh}.md\:max-w-md{max-width:28rem}.md\:max-w-lg{max-width:32rem}.md\:fixed{position:fixed}.md\:w-1\/2{width:50%}}@media (min-width:1024px){.lg\:container{width:100%}@media (min-width:640px){.lg\:container{max-width:640px}}@media (min-width:768px){.lg\:container{max-width:768px}}@media (min-width:1024px){.lg\:container{max-width:1024px}}@media (min-width:1280px){.lg\:container{max-width:1280px}}.lg\:flex-row{flex-direction:row}.lg\:flex-col{flex-direction:column}.lg\:self-end{align-self:flex-end}.lg\:mr-10{margin-right:2.5rem}.lg\:px-8{padding-left:2rem;padding-right:2rem}.lg\:text-right{text-align:right}}@media (min-width:1280px){.xl\:container{width:100%}@media (min-width:640px){.xl\:container{max-width:640px}}@media (min-width:768px){.xl\:container{max-width:768px}}@media (min-width:1024px){.xl\:container{max-width:1024px}}@media (min-width:1280px){.xl\:container{max-width:1280px}}.xl\:px-16{padding-left:4rem;padding-right:4rem}}html{--name:#fff}.gatsby-highlight{--bg-opacity:1;background-color:#121212;background-color:rgba(18,18,18,var(--bg-opacity));--text-opacity:1;color:#f4f5f7;color:rgba(244,245,247,var(--text-opacity));overflow-x:auto;font-size:.875rem;margin-left:-1.25rem;margin-right:-1.25rem;padding:.5rem 1.25rem;margin-bottom:2.5rem}@media (min-width:1024px){.gatsby-highlight{border-radius:.25rem}}.token.plain{display:inline-block}.keyword,.token.tag{font-weight:700;color:#fff}.token.builtin,.token.number,.token.operator,.token.punctuation,.token.string,.token.variable{color:#9fa6b2}.token.comment{color:#6b7280}.token.tag.punctuation{color:#6b7280!important}.token.attr-name,.token.class-name,.token.function,.token.tag.attr-name,.token.tag.attr-value{color:#f4f5f7;font-weight:400}.prose :first-child{margin-top:0}@media (min-width:1024px){.prose img{border-radius:.25rem}}.prose .gatsby-resp-image-wrapper,.prose img:not(.gatsby-resp-image-image){margin-left:-1.25rem!important;margin-right:-1.25rem!important;margin-bottom:2.5rem!important;display:block!important;min-width:calc(100% + 2.5rem)}.prose blockquote,.prose ol,.prose p,.prose ul{margin-bottom:2.5rem}.prose hr{margin-top:1.25rem;margin-bottom:1.25rem}.prose ol,.prose ul{margin-left:1rem}.prose ul{list-style-type:disc}.prose ol{list-style-type:decimal}.prose li{padding-left:.75rem;margin-bottom:.5rem}.prose blockquote{border-left-width:2px;--border-opacity:1;border-color:#d2d6dc;border-color:rgba(210,214,220,var(--border-opacity));border-top-left-radius:.125rem;border-bottom-left-radius:.125rem;padding-left:1rem;--text-opacity:1;color:#374151;color:rgba(55,65,81,var(--text-opacity));font-style:italic}.prose h1,.prose h2,.prose h3,.prose h4,.prose h5,.prose h6{margin-bottom:2.5rem;margin-top:4rem}.prose h1{font-size:2.25rem;font-weight:600}.prose h1,.prose h2{--text-opacity:1;color:#000;color:rgba(0,0,0,var(--text-opacity))}.prose h2{font-size:1.5rem;font-weight:700}.prose h3{font-size:1.25rem;margin-top:3rem}.prose h3,.prose h4{--text-opacity:1;color:#161e2e;color:rgba(22,30,46,var(--text-opacity));font-weight:700;margin-bottom:1.5rem}.prose h4{font-size:1rem;margin-top:2.5rem}.prose h5{color:#000;color:rgba(0,0,0,var(--text-opacity));font-size:.875rem;margin-bottom:1.5rem;margin-top:2.5rem}.prose h5,.prose h6{--text-opacity:1;font-weight:700}.prose h6{color:#374151;color:rgba(55,65,81,var(--text-opacity));font-size:.75rem;text-transform:uppercase;letter-spacing:.025em;margin-bottom:.5rem;margin-top:2rem}.prose a{transition-property:all;transition-duration:.2s}.prose code{--bg-opacity:1;background-color:#121212;background-color:rgba(18,18,18,var(--bg-opacity));--text-opacity:1;color:#f4f5f7;color:rgba(244,245,247,var(--text-opacity));border-radius:.25rem}</style><meta name="generator" content="Gatsby 2.24.41"/><title data-react-helmet="true">Alessandro Scandone :: Dev</title><link data-react-helmet="true" href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@800&amp;family=Nunito:ital,wght@0,300;0,400;0,600;0,700;1,400;1,700&amp;display=swap" rel="stylesheet"/><meta data-react-helmet="true" name="theme-color" content="#121212"/><link as="script" rel="preload" href="/webpack-runtime-2883f5f4ae4ace5f4d96.js"/><link as="script" rel="preload" href="/framework-fd2b85530eec85104a39.js"/><link as="script" rel="preload" href="/app-1e5c736d7d3221423c46.js"/><link as="script" rel="preload" href="/styles-c2fe8482057191dca484.js"/><link as="script" rel="preload" href="/commons-f4f74c41eb4d222720ec.js"/><link as="script" rel="preload" href="/component---src-components-blog-layout-tsx-c0c0f8a6e587da50eeea.js"/><link as="fetch" rel="preload" href="/page-data/blog/declarative-ui-programming/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="bg-darkest-gray antialiased"><div class="flex flex-col md:flex-row"><header class="md:flex-1 py-16 flex sm:justify-center items-center md:h-screen"><div class="md:max-w-md px-5 md:fixed w-full md:w-1/2 antialiased"><div class="text-4xl font-serif font-extrabold leading-tight antialiased"><h5 class="text-gray-500 ">Blog</h5><h2 class="text-white">Introduction to functional UI programming</h2><div class="mt-3"></div></div><h6 class="uppercase text-sm font-light tracking-wide text-gray-300">2020-10-21</h6><div class="mt-4"></div><div class="flex justify-between mt-10"><div class="flex flex-wrap"><div class="mr-4 mb-3"><span class="rounded p-px from-pink-700 via-pink-500 to-orange-500 bg-gradient-45"><span class="rounded bg-darkest-gray px-2"><span class="text-gray-200 text-xs font-mono antialiased leading-none">functional programming</span></span></span></div><div class="mr-4 mb-3"><span class="rounded p-px from-pink-700 via-pink-500 to-orange-500 bg-gradient-45"><span class="rounded bg-darkest-gray px-2"><span class="text-gray-200 text-xs font-mono antialiased leading-none">lit-html</span></span></span></div><div class="mr-4 mb-3"><span class="rounded p-px from-pink-700 via-pink-500 to-orange-500 bg-gradient-45"><span class="rounded bg-darkest-gray px-2"><span class="text-gray-200 text-xs font-mono antialiased leading-none">typescript</span></span></span></div></div><div class="mr-8"></div><span class="text-cool-gray-300"><span class="flex items-center"><a class="transition-all duration-200 underline-gradient-dark" href="/"><span class="font-semibold">Home</span></a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="h-5"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></span></span></div></div></header><main class="min-w-0 rounded-t-lg md:rounded-none flex-1 py-8 bg-white md:flex min-h-screen"><div class="max-w-full px-5 lg:px-8 xl:px-16"><article class="max-w-2xl text-lg mx-auto text-gray-800 leading-relaxed prose"><div><p>During last years design patterns typical of functional paradims have become more and more popular in mainstream programming. Both the web based ( like <a href="https://reactjs.org">React.js</a> ) and mobile (swiftUI, jetpack compose, flutter) technologies are popularizing a declarative style of UI development.</p>
<p>This guide is an attempt to explain, in the simpliest way possible, the why and the how of these approaches, to both the people who are used to manipulate the UI in an imperative way (i'm looking at you, jQuery!), and the people who did try to understand these concepts, and now are more confused than before (what's the point of redux? what are the difference between props and state?)</p>
<p>But mostly, this guide is addressed to whose who believe that frontend development <strong>has</strong> to be frustratring, difficult to scale and refactor, unreliable, and rich of bad practices.</p>
<h2>The problem</h2>
<p>We want to realize this simple example:
Every time we click on the button, we add the current timestamp to the list. The checkbox determines if we only see even timestamps. We also want to show a counter of the number of timestamps. I know that's quite contrinved, but you will be able to apply the same solution to <em>any</em> other problem.</p>
<p>To understand what is meant with declarative programming, let's first see what declarative programming is <em>not</em>. Suppose we have the following markup:</p>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  Add current timestamp
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>checkbox<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>filter-even<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>filter-even<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  Only show even timestamps
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Count: 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>1603306446511<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">></span></span>1603306443521<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span></code></pre></div>
<p>The most straightforward solution for the first requirement would be to create ids of the elements we need to change, attach event handler to the button, and manually append the new element to the dom. Something like:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#btn-id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#ul-id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;li></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/li></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#counter-id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#ul-id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Well, that should actually work. But we can already notice some problems:</p>
<ol>
<li>There is no way you can test that</li>
<li>Markup is split in two different places with no actual reason.</li>
<li>There is no clear way of reusing code: what if I wanted to reuse the same component in a different place?</li>
</ol>
<p>The reason is the same: the state resides <strong>in</strong> the DOM. That is an extremely bad practice, for at least two reasons.</p>
<p>First, it makes it super difficult to query. Suppose that now we had to implement the filter checkbox. How would I even do that? Crawl throught the children of the <code class="language-text">&lt;ul&gt;</code> and get the content of the <code class="language-text">&lt;li&gt;</code> element? That would break as soon as the html changed. One might use cleverer tricks (using selector and whatnot) but still, not the ideal solution: logic depends from markup, and markup depends from logic.</p>
<p>But the core reason is that in general there is <strong>not</strong> a 1-1 relationship between a "piece of state" and the UI: the same information can be needed in different places of the ui (in our example, we need the elements of the list both in the list itself and the items counter); and a single place of the ui can need two distinct "pieces of state" (in this case, the list needs both the list of timestamps <em>and</em> the value of the checkbox). Problems is, every time one one of them changes, every other has to change. This can lead to an extremely complex graph of connected components of the code (aka: spaghetti code ).</p>
<p>Let's take a step back then, and explore a different (easier) approach.</p>
<h2>The solution: Step 1 (Model)</h2>
<p>We would like to find a representation (using javascript primitives, arrays, and objects) of the state that abstracts from the markup, such that even with different UIs, the object <em>shape</em> (sometimes referred as <code class="language-text">Model</code>) remains the same. We also would like a <em>minimal</em> representation of the state, so that we don't have to keep every information that depends on the state in sync with the state. I will use typescript for the rest of the guide. It is not required, but I highly encourage you to use it: [TODO...expressive, consistent].</p>
<p>For example, if we were to create the react tutorial's <a href="https://codepen.io/gaearon/pen/EmmOqJ?editors=0010">Tic Tac Toe implementation</a>, we could model the state this way:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name">Player</span> <span class="token operator">=</span> <span class="token string">'X'</span> <span class="token operator">|</span> <span class="token string">'Y'</span>

<span class="token keyword">type</span> <span class="token class-name">Model</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  gameBoard<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>Player <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token operator">></span>
<span class="token punctuation">}</span></code></pre></div>
<p>This means: the model is an object with one field, gameBoard, an array of either <code class="language-text">Player</code> or <code class="language-text">undefined</code>. We could, of course, use <code class="language-text">type Model = Array&lt;Player | undefined&gt;</code> in the first place, but creating an object makes it easier to refactor (we just have to add another field). (We could also have used a 9-tuple to represent the gameBoard)</p>
<blockquote>
<p>Don't be scared of null / undefined: typescript makes it type-safe! The strictNullCheck compiler option prevents the null exception to even happen, and the nullish coaleshing (<code class="language-text">??</code>) chaining (<code class="language-text">ob?.prop</code>) and call (<code class="language-text">f?.(x)</code>) make it the idiomatic and handy way to represent an optional value. Just be careful to the nesting of optional values.</p>
</blockquote>
<p>You might be tempted to keep something like <code class="language-text">turn: Player</code> in the model. You don't need to do that! As long as we can infer an information from the state. We know that if (and only if)  the number of Xs is the same of the number of Ys, it's Xs turn. We can calculate if, given a state, one of the player has won, or if the game has ended with a tie. Storing the minimal state possible (possibly combined with a static type sistem) prevents bugs like inconcistency of state to even happen. And usually is not even an actual performance optimization - definitely not in this case.  But we'll talk later about that.</p>
<p>Given that state, the initial state would be:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> init<span class="token operator">:</span> Model <span class="token operator">=</span> <span class="token punctuation">{</span>
  gameBoard<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Before reading the next section, try to write:</p>
<ul>
<li>The <code class="language-text">Model</code> type</li>
<li>The initial state <code class="language-text">init</code> (of type <code class="language-text">Model</code>)</li>
<li>The functions needed to recover any other relevant information from the state, that is not explicitly defined in the state.</li>
</ul>
<p>Pseudocode is fine too; multiple answers are possible.</p>
<hr>
<h3>Step 1 - Answer</h3>
<p>Here's a possible solution:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">type</span> <span class="token class-name">State</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  timeStamps<span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span>
  filtered<span class="token operator">:</span> <span class="token builtin">boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> init<span class="token operator">:</span> State <span class="token operator">=</span> <span class="token punctuation">{</span>
  timeStamps<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  filtered<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> filteredTimestamps <span class="token operator">=</span> <span class="token punctuation">(</span>state<span class="token operator">:</span> State<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">></span> <span class="token operator">=></span>
  state<span class="token punctuation">.</span>timeStamps<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>state<span class="token punctuation">.</span>filtered <span class="token operator">?</span> t <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token punctuation">(</span>state<span class="token operator">:</span> State<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">=</span> state<span class="token punctuation">.</span>timeStamps<span class="token punctuation">.</span>length</code></pre></div>
<h2>Step 2: Logic</h2>
<p>Now we need to implement the logic of the application. We still don't need to know the exact implementation of the view to wthat. For instance, in the example before, we might implement the functionality of checking a square, in this way:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">function</span> <span class="token function">checkSquare</span><span class="token punctuation">(</span>checkedIndex<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> state<span class="token operator">:</span> Model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> nextPlayer <span class="token operator">=</span> <span class="token function">getPlayerTurn</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span>
  <span class="token keyword">return</span> state<span class="token punctuation">.</span>gameBoard<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>player<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=></span>
    i <span class="token operator">!==</span> checkedIndex <span class="token operator">?</span> player <span class="token operator">:</span> nextPlayer<span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>Now the testing problem is definitely trivial. We can just write assertions like:</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'checkSquare functionality'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>
    <span class="token function">checkSquare</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token keyword">undefined</span><span class="token punctuation">,</span>
      <span class="token keyword">undefined</span><span class="token punctuation">,</span>
      <span class="token keyword">undefined</span><span class="token punctuation">,</span>
      <span class="token keyword">undefined</span><span class="token punctuation">,</span>
      <span class="token keyword">undefined</span><span class="token punctuation">,</span>
      <span class="token keyword">undefined</span><span class="token punctuation">,</span>
      <span class="token keyword">undefined</span><span class="token punctuation">,</span>
      <span class="token keyword">undefined</span><span class="token punctuation">,</span>
      <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token string">'X'</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    <span class="token keyword">undefined</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>A crucial key point here is that every function no mutation is ever made. All the code until now just takes something and returns something else, without changing anything nor <em>doing</em> anything. Isolating the impure parts (parts of code with mutation or side effects) is a basic principle of functional programming. In haskell, this is brought to extreme consequences: you can't even <em>do</em> side effects. You just can <em>model</em> them as <em>data</em> (and compose them). The runtime will take care of them:</p>
<div class="gatsby-highlight" data-language="hs"><pre class="language-hs"><code class="language-hs"><span class="token comment">-- This doesn't actually do anything</span>
<span class="token hvariable">myAction</span> <span class="token operator">=</span> <span class="token builtin">readLn</span>

<span class="token comment">-- Nor this</span>
<span class="token hvariable">myOtherAction</span> <span class="token operator">=</span> <span class="token builtin">print</span> <span class="token string">"You typed: "</span>

<span class="token comment">-- Nor this</span>
<span class="token hvariable">myActions</span> <span class="token operator">=</span> <span class="token keyword">do</span>
  <span class="token hvariable">line</span> <span class="token operator">&lt;-</span> <span class="token hvariable">myAction</span>
  <span class="token hvariable">myOtherAction</span>
  <span class="token builtin">print</span> <span class="token hvariable">line</span>

<span class="token comment">-- The runtime will execute the main</span>
<span class="token hvariable">main</span> <span class="token operator">=</span> <span class="token hvariable">myActions</span></code></pre></div>
<p>Of course you don't need to be so extreme about it [...]</p>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token function-variable function">addTimeStamp</span> <span class="token operator">=</span> <span class="token punctuation">(</span>timestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>state<span class="token operator">:</span> State<span class="token punctuation">)</span><span class="token operator">:</span> State <span class="token operator">=></span> state

<span class="token keyword">const</span> toggleFilter <span class="token operator">=</span> <span class="token punctuation">(</span>state<span class="token operator">:</span> State<span class="token punctuation">)</span><span class="token operator">:</span> State <span class="token operator">=></span> state</code></pre></div>
<hr>
<h3>Step 2 - Answer</h3>
<div class="gatsby-highlight" data-language="ts"><pre class="language-ts"><code class="language-ts"><span class="token keyword">const</span> <span class="token function-variable function">addTimeStamp</span> <span class="token operator">=</span> <span class="token punctuation">(</span>timestamp<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>state<span class="token operator">:</span> State<span class="token punctuation">)</span><span class="token operator">:</span> State <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>state<span class="token punctuation">,</span>
  timeStamps<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token operator">...</span>state<span class="token punctuation">.</span>timeStamps<span class="token punctuation">,</span> timestamp<span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> toggleFilter <span class="token operator">=</span> <span class="token punctuation">(</span>state<span class="token operator">:</span> State<span class="token punctuation">)</span><span class="token operator">:</span> State <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>state<span class="token punctuation">,</span>
  filtered<span class="token operator">:</span> <span class="token operator">!</span>state<span class="token punctuation">.</span>filtered<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>[test]</p>
<h2>Interlude: <code class="language-text">lit-html</code></h2>
<p>[lit-html api]</p>
<h2>Step 3: View</h2>
<h3>Appendix: About performance</h3></div></article></div></main></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/declarative-ui-programming";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-88d9aed314b16f9b2adc.js"],"app":["/app-1e5c736d7d3221423c46.js"],"component---src-components-blog-layout-tsx":["/component---src-components-blog-layout-tsx-c0c0f8a6e587da50eeea.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-f50ced29054b0635baa1.js"]};/*]]>*/</script><script src="/polyfill-88d9aed314b16f9b2adc.js" nomodule=""></script><script src="/component---src-components-blog-layout-tsx-c0c0f8a6e587da50eeea.js" async=""></script><script src="/commons-f4f74c41eb4d222720ec.js" async=""></script><script src="/styles-c2fe8482057191dca484.js" async=""></script><script src="/app-1e5c736d7d3221423c46.js" async=""></script><script src="/framework-fd2b85530eec85104a39.js" async=""></script><script src="/webpack-runtime-2883f5f4ae4ace5f4d96.js" async=""></script></body></html>